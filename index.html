<html>
    <head>
        <title>Home</title>
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
        <h1>Mobile tester</h1>
        <ul id="mobileDeviceOutput">

        </ul>
    </body>
    <footer>
        <script>
            const output = document.getElementById('mobileDeviceOutput');

            async function getMedia(constraints) {
                let stream = null;

                try {
                    stream = await navigator.mediaDevices.getUserMedia(constraints);
                } catch(err) {
                    const error = document.createElement('li');
                    error.textContent = err.name + ': ' + err.message;
                }
            }

            await getMedia({
                video: true
            });

            navigator.mediaDevices.enumerateDevices()
                .then((devices) => {
                    devices.forEach((device) => {
                        const identifier = document.createElement('li');

                        console.error(device);

                        identifier.textContent = `${device.kind}: ${device.label} id = ${device.deviceId}`;
                        output.appendChild(identifier);

                        if (device.getCapabilities) {
                            const info = document.createElement('li');

                            console.error(device.getCapabilities());

                            info.textContent = JSON.stringify(device.getCapabilities());
                            output.appendChild(info);
                        } else {
                            const error = document.createElement('li');
                            error.textContent = 'Get Capabilities is not supported';
                        }
                    });
                });
        </script>
    </footer>
</html>